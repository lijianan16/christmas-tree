# 魔法圣诞树 - 手势控制版

一个使用 Three.js 和 MediaPipe 创建的交互式 3D 圣诞树，支持手势识别控制。

## 🎯 给没有环境的人 - 最简单的方式

### ⭐ 方式一：使用启动脚本（推荐，最简单）

**Windows 用户：**
1. 双击 `启动服务器.bat` 文件
2. 等待浏览器自动打开
3. 如果提示需要安装 Node.js，访问 https://nodejs.org/ 下载安装

**Mac/Linux 用户：**
1. 右键点击 `启动服务器.sh` → "打开终端运行"
2. 或在终端执行：`chmod +x 启动服务器.sh && ./启动服务器.sh`

**如果 Node.js 没安装，也可以用 Python：**
- Windows: 双击 `启动服务器_Python.bat`
- Mac/Linux: 运行 `启动服务器_Python.sh`

### ⭐ 方式二：在线访问（最简单，无需安装）

如果代码已部署到 GitHub Pages，直接访问网址即可：
- 无需安装任何软件
- 打开浏览器就能用
- 支持所有设备

查看 `GitHub_Pages_部署指南.md` 了解如何部署。

### ⭐ 方式三：手动启动

**使用 npx http-server：**
```bash
cd "项目文件夹路径"
npx http-server -p 8080
```
然后访问：`http://127.0.0.1:8080/ai_studio_code.html`

**或使用 Python：**
```bash
cd "项目文件夹路径"
python -m http.server 8000
```
然后访问：`http://localhost:8000/ai_studio_code.html`

---

## 🚀 详细使用说明

### 1. 启动本地服务器

由于浏览器安全策略，必须通过 HTTP 服务器访问（不能直接双击打开文件）。

### 2. 开启摄像头权限

#### 🌐 Chrome / Edge 浏览器

1. **自动提示**：页面加载时会自动请求摄像头权限，点击"允许"即可
2. **手动开启**：
   - 点击地址栏左侧的 🔒 或 🎥 图标
   - 在"摄像头"选项中选择"允许"
   - 刷新页面

3. **如果被拒绝，重新授权**：
   - 点击地址栏左侧的 🔒 图标
   - 找到"摄像头"设置
   - 选择"允许"
   - 或点击页面上的"启用摄像头"按钮

#### 🦊 Firefox 浏览器

1. 页面会弹出权限请求对话框，选择"允许访问"
2. 如果被拒绝：
   - 点击地址栏左侧的 🔒 图标
   - 在"权限"中找到"使用摄像头"
   - 选择"允许"
   - 刷新页面

#### 🍎 Safari 浏览器

1. 首次访问时会弹出权限请求，选择"允许"
2. 如果被拒绝：
   - 菜单栏：Safari > 设置 > 网站
   - 找到"摄像头"选项
   - 选择"允许"或"询问"
   - 刷新页面

#### 📱 移动设备

- **iOS Safari**：设置 > Safari > 摄像头 > 允许
- **Android Chrome**：设置 > 网站设置 > 摄像头 > 允许

## 🎮 使用方法

### 手势控制（需要摄像头）

- **握拳**：切换到树形模式
- **张开手掌**：切换到散开模式
- **捏合手势**（拇指和食指）：聚焦到随机照片
- **移动手掌**：旋转 3D 场景

### 键盘控制（无需摄像头）

- `1`：树形模式
- `2`：散开模式
- `3`：聚焦模式
- `H`：隐藏/显示控制界面

### 其他功能

- **添加照片**：点击"Add Memories"按钮上传图片
- **查看摄像头状态**：页面底部会显示摄像头连接状态

## ⚠️ 常见问题

### 1. 页面一直加载

**原因**：可能是 MediaPipe 模型加载失败或网络问题

**解决方案**：
- 检查网络连接
- 等待 15 秒，如果超时会自动使用降级模式（键盘控制）
- 打开浏览器开发者工具（F12）查看 Console 错误信息

### 2. 摄像头无法访问

**可能原因**：
- 权限被拒绝
- 摄像头被其他应用占用
- 浏览器不支持摄像头 API

**解决方案**：
- 点击页面上的"启用摄像头"按钮手动请求权限
- 检查浏览器地址栏的权限设置
- 关闭其他使用摄像头的应用
- 使用键盘控制作为替代方案

### 3. 手势识别不工作

**可能原因**：
- MediaPipe 模型加载失败
- 摄像头未启用
- 光线不足或手部不在摄像头范围内

**解决方案**：
- 确保摄像头已启用（查看页面底部状态提示）
- 确保手部在摄像头视野内
- 改善光线条件
- 使用键盘控制作为替代

### 4. 页面显示空白

**可能原因**：
- WebGL 不支持
- 浏览器版本过旧

**解决方案**：
- 更新浏览器到最新版本
- 尝试使用 Chrome 或 Edge 浏览器

## 🔧 技术栈

- **Three.js**：3D 渲染引擎
- **MediaPipe**：手势识别
- **WebGL**：硬件加速渲染
- **ES6 Modules**：模块化代码

## 📝 项目结构

```
Christmas Tree/
├── ai_studio_code.html  # 主文件（包含所有代码）
└── README.md            # 本说明文档
```

## 🎨 功能特性

- ✨ 4000+ 粒子效果（1500 主粒子 + 2500 灰尘粒子 + 20 糖果棒）
- 🎭 三种交互模式：树形、散开、聚焦
- 🎥 实时手势识别控制
- 📸 支持上传照片添加到场景
- ⌨️ 键盘控制降级方案
- 💫 后处理效果（Bloom、色调映射）

## 📄 许可证

本项目仅供学习和娱乐使用。

---

**提示**：如果遇到任何问题，请打开浏览器开发者工具（F12）查看 Console 标签页中的错误信息，这将有助于诊断问题。

